import{_ as m,b as u,m as v,o as i,c as l,d as t,f as b,F as f,y,t as o,z as g,p as x,g as w}from"./index-c62a27fd.js";import{c as n}from"./cartStore-c76c6944.js";import{b as I}from"./bootstrap.bundle.min-ccc122ff.js";import"./sweetalert2.all-4e1800ee.js";const{VITE_URL:h,VITE_PATH:p}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"bloom-api",BASE_URL:"/bloom_every_day/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},S={data(){return{timeFinal:"",orderInfo:{user:{},message:""},paidFeedback:"",is_paid:""}},components:{},computed:{...u(n,["carts","final_total"])},methods:{...v(n,["getCarts"]),getOrder(){const{id:a}=this.$route.params;this.$http.get(`${h}v2/api/${p}/order/${a}`).then(s=>{this.orderInfo=s.data.order;const _=s.data.order.create_at;this.timeSwitch(_),this.is_paid=s.data.order.is_paid}).catch(s=>{console.log(s)})},payOrder(a){this.$http.post(`${h}v2/api/${p}/pay/${a}`).then(s=>{this.paidFeedback=s.data.message,this.paidModal.show(),this.getOrder()}).catch(s=>{console.log(s)})},closeModal(){this.paidModal.hide()},timeSwitch(a){const s=new Date(a*1e3);this.timeFinal=s.toLocaleDateString()}},mounted(){this.getCarts(),this.getOrder(),this.paidModal=new I.Modal(this.$refs.paidModal)}},e=a=>(x("data-v-4345d83d"),a=a(),w(),a),k={class:"cart_check_wrapper"},M={class:"container"},T=g('<div class="step_group" data-v-4345d83d><div class="step_item" data-v-4345d83d><div class="caption" data-v-4345d83d>訂單資訊</div></div><div class="step_item" data-v-4345d83d><div class="caption" data-v-4345d83d>填寫資訊</div></div><div class="step_item active" data-v-4345d83d><div class="caption" data-v-4345d83d>完成訂單</div></div></div>',1),V={class:"row mx-auto"},E={class:"order_info col-lg-5"},F={class:"cart_h5 bg-bg-2"},L={key:0,class:"caption text-primary"},O={key:1,class:"caption text-primary"},C={class:"cart_table"},D={class:"table"},N=e(()=>t("tr",{class:"row mx-auto d-md-flex cart_table_title"},[t("td",{class:"col-7 col-sm-6"},"商品資訊"),t("td",{class:"col-2 col-sm-2"},"數量"),t("td",{class:"col-3 col-sm-4"},"小計")],-1)),P={class:"col-7 col-sm-6"},R={class:"cart_product_info"},$={class:"cart_product_img"},A=["src"],B={class:"cart_product_title"},U={class:"col-2 col-sm-2 order_2 order_md_0 selected_qty"},j={class:"col-3 col-sm-4 order_2 order_md_0 selected_subtotal"},q={class:"cart_count"},H=e(()=>t("div",{class:"cart_total_text"},"總計：",-1)),z={class:"cart_total_price"},K={class:"buyer_form col-lg-7"},G=e(()=>t("h5",{class:"cart_h5 bg-bg-2"},"訂單資訊",-1)),J={class:"orderList_table"},Q={class:"table"},W={class:"row mx-auto"},X=e(()=>t("td",{class:"col-5"},"訂單金額",-1)),Y={class:"col-7"},Z={class:"text-primary"},tt={class:"row mx-auto"},st=e(()=>t("td",{class:"col-5"},"訂單編號",-1)),ot={class:"col-7",style:{"word-break":"break-word"}},et={class:"row mx-auto"},dt=e(()=>t("td",{class:"col-5"},"訂購時間",-1)),at={class:"col-7"},ct={class:"row mx-auto"},it=e(()=>t("td",{class:"col-5"},"收件人姓名",-1)),lt={class:"col-7"},_t={class:"row mx-auto"},rt=e(()=>t("td",{class:"col-5"},"電話",-1)),nt={class:"col-7"},ht={class:"row mx-auto"},pt=e(()=>t("td",{class:"col-5"},"信箱",-1)),mt={class:"col-7"},ut={class:"row mx-auto"},vt=e(()=>t("td",{class:"col-5"},"地址",-1)),bt={class:"col-7"},ft={class:"row mx-auto"},yt=e(()=>t("td",{class:"col-5"},"備註",-1)),gt={class:"col-7"},xt={class:"d-flex justify-content-end py-4 mb-3"},wt={class:"modal fade",ref:"paidModal",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},It={class:"modal-dialog"},St={class:"modal-content"},kt={class:"modal-header"},Mt={class:"modal-title",id:"exampleModalLabel"},Tt=e(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Vt=e(()=>t("div",{class:"modal-body"}," 您的商品將於下訂後三至五天寄出，商品寄出後將以 Email 通知，請留意您提供的收件人信箱，日日是好日祝您購物愉快！ ",-1)),Et={class:"modal-footer justify-content-center"};function Ft(a,s,_,Lt,d,r){return i(),l("div",k,[t("div",M,[T,t("div",V,[t("div",E,[t("h5",F,[b(" 訂單明細 "),d.is_paid?(i(),l("span",L,"(已付款)")):(i(),l("span",O,"(未付款)"))]),t("div",C,[t("table",D,[N,(i(!0),l(f,null,y(d.orderInfo.products,c=>(i(),l("tr",{class:"row mx-auto order_control",key:c.id},[t("td",P,[t("div",R,[t("div",$,[t("img",{src:c.product.imageUrl,alt:""},null,8,A)]),t("h6",B,o(c.product.title),1)])]),t("td",U,[t("div",null,o(c.qty),1)]),t("td",j,[t("div",null,"NT $"+o(c.product.price),1)])]))),128)),t("tr",null,[t("div",q,[H,t("div",z,"NT $"+o(d.orderInfo.total),1)])])])])]),t("div",K,[G,t("div",J,[t("table",Q,[t("tr",W,[X,t("td",Y,[t("span",Z," NT $"+o(d.orderInfo.total),1)])]),t("tr",tt,[st,t("td",ot,o(d.orderInfo.id),1)]),t("tr",et,[dt,t("td",at,o(this.timeFinal),1)]),t("tr",ct,[it,t("td",lt,o(d.orderInfo.user.name),1)]),t("tr",_t,[rt,t("td",nt,o(d.orderInfo.user.tel),1)]),t("tr",ht,[pt,t("td",mt,o(d.orderInfo.user.email),1)]),t("tr",ut,[vt,t("td",bt,o(d.orderInfo.user.address),1)]),t("tr",ft,[yt,t("td",gt,o(d.orderInfo.message),1)])])])]),t("div",xt,[t("button",{type:"button",class:"btn btn-outline-neutral pay_btn",onClick:s[0]||(s[0]=c=>r.payOrder(d.orderInfo.id))}," 信用卡付款 ")]),t("div",wt,[t("div",It,[t("div",St,[t("div",kt,[t("h5",Mt,o(d.paidFeedback)+"！",1),Tt]),Vt,t("div",Et,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[1]||(s[1]=c=>r.closeModal())},"OK")])])])],512)])])])}const Pt=m(S,[["render",Ft],["__scopeId","data-v-4345d83d"]]);export{Pt as default};
