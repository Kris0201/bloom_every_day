import{J as d,K as s}from"./index-c62a27fd.js";import{S as n}from"./sweetalert2.all-4e1800ee.js";const{VITE_URL:r,VITE_PATH:c}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"bloom-api",BASE_URL:"/bloom_every_day/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},m=d("cart",{state:()=>({carts:[],final_total:0}),actions:{addToCart(t,a=1){const e=this.carts.findIndex(o=>t===o.product_id);if(e>-1){const o=this.carts[e].qty,l=5;if(o+a>l){n.fire({title:`<h6>此商品已有<span style="color:#FF3D33;"> ${o} </span>筆在購物車中嘍！</h6><h6>同一商品購買總數上限為<span style="color:#FF3D33;"> 5 </span>筆</h6><h6>請重新調整選購數量~</h6>`,confirmButtonColor:"#FF3D33"});return}}const i={product_id:t,qty:a};s.post(`${r}v2/api/${c}/cart`,{data:i}).then(o=>{n.fire({toast:!0,position:"center",timer:2e3,title:`<h6 class="mb-0" style="color:#ff3d33; text-align:center;">商品${o.data.message}囉！
                        </h6>`,showConfirmButton:!1,background:"white"}),this.getCarts()}).catch(o=>{console.log(o)})},getCarts(){s.get(`${r}v2/api/${c}/cart`).then(t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total}).catch(t=>{console.log(t)})},updateCartItem(t){const a={product_id:t.product.id,qty:t.qty};s.put(`${r}v2/api/${c}/cart/${t.id}`,{data:a}).then(()=>{this.getCarts()}).catch(e=>{console.log(e)})},deleteCartItem(t){s.delete(`${r}v2/api/${c}/cart/${t.id}`).then(a=>{const e=a.data.message;n.fire({toast:!0,position:"center",timer:2e3,showConfirmButton:!1,title:`<span style="color:#FF3D33;">商品${e}~<span>`,background:"white"}),this.getCarts()}).catch(a=>{console.log(a)})}}});export{m as c};
