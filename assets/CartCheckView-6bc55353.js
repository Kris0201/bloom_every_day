import{_ as w,E as x,G as S,H as F,b as k,m as C,r as n,o as v,c as f,d as e,F as E,z as I,t as _,e as l,w as h,f as T,n as m,C as U,I as L,p as P,h as D}from"./index-b25b2491.js";import{S as b,c as g}from"./cartStore-34eabe95.js";import{_ as N,a as B}from"./logo_flower-86cc868b.js";const{VITE_URL:q,VITE_PATH:M}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"bloom-api",BASE_URL:"/bloom_every_day/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},R={data(){return{isLoading:!1,fullPage:!0,order:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{VForm:x,VField:S,ErrorMessage:F},computed:{...k(g,["carts","final_total"])},methods:{...C(g,["getCarts"]),isPhone(a){return/^(09)[0-9]{8}$/.test(a)?!0:"需要正確的電話號碼"},onSubmit(){const a=this.order;this.$http.post(`${q}/v2/api/${M}/order`,{data:a}).then(s=>{const u=s.data.orderId;u===void 0?b.fire({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,title:'<span style="color: white; text-align:center;">請填妥表單再按送出！</span>',background:"#FF3D33"}):(this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.$router.push(`/cartPay/${u}`),b.fire({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,title:'<span style="color:#FF3D33;">成功送單！<span>',background:"white"})},1e3))}).catch(s=>{console.log(s)})}},mounted(){}},r=a=>(P("data-v-b7079c1a"),a=a(),D(),a),A={class:"cart_check_wrapper"},H={class:"container"},O=T('<div class="step_group" data-v-b7079c1a><div class="step_item" data-v-b7079c1a><div class="caption" data-v-b7079c1a>訂單資訊</div></div><div class="step_item active" data-v-b7079c1a><div class="caption" data-v-b7079c1a>填寫資訊</div></div><div class="step_item" data-v-b7079c1a><div class="caption" data-v-b7079c1a>完成訂單</div></div></div>',1),z={class:"row mx-auto"},j={class:"order_info col-lg-5"},G=r(()=>e("h5",{class:"cart_h5 bg-bg-2"},"訂單明細",-1)),J={class:"cart_table"},K={class:"table"},Q=r(()=>e("tr",{class:"row mx-auto d-md-flex cart_table_title"},[e("td",{class:"col-7 col-sm-6"},"商品資訊"),e("td",{class:"col-2 col-sm-2"},"數量"),e("td",{class:"col-3 col-sm-4"},"小計")],-1)),W={class:"col-7 col-sm-6"},X={class:"cart_product_info"},Y={class:"cart_product_img"},Z=["src"],$={class:"cart_product_title"},ee={class:"col-2 col-sm-2 order_2 order_md_0 selected_qty"},se={class:"col-3 col-sm-4 order_2 order_md_0 selected_subtotal"},te={class:"cart_count"},oe=r(()=>e("div",{class:"cart_total_text"},"總計：",-1)),ae={class:"cart_total_price"},le=r(()=>e("div",{class:"loading_brand"},[e("img",{src:N,alt:""}),e("div",{class:"loading_flower"},[e("img",{src:B,alt:""})])],-1)),re={class:"buyer_form col-lg-7"},de=r(()=>e("h5",{class:"cart_h5 bg-bg-2"},"訂購人資訊",-1)),ie={class:"form-group"},ce=r(()=>e("label",{for:"name",class:"form-label label_style"},"收件人姓名",-1)),ne={class:"form-group"},_e=r(()=>e("label",{for:"tel",class:"form-label label_style"},"電話",-1)),me={class:"form-group"},ue=r(()=>e("label",{for:"email",class:"form-label label_style"},"信箱",-1)),pe={class:"form-group"},ve=r(()=>e("label",{for:"address",class:"form-label label_style"},"地址",-1)),fe={class:"cart_textarea"},he=r(()=>e("label",{for:"message",class:"form-label label_style"},"備註",-1)),be={class:"d-flex justify-content-end py-4 mb-3"};function ge(a,s,u,Ve,o,p){const V=n("vue-loading"),i=n("VField"),c=n("ErrorMessage"),y=n("VForm");return v(),f("div",A,[e("div",H,[O,e("div",z,[e("div",j,[G,e("div",J,[e("table",K,[Q,(v(!0),f(E,null,I(a.carts,t=>(v(),f("tr",{class:"row mx-auto order_control",key:t.id},[e("td",W,[e("div",X,[e("div",Y,[e("img",{src:t.product.imageUrl,alt:""},null,8,Z)]),e("h6",$,_(t.product.title),1)])]),e("td",ee,[e("div",null,"x "+_(t.qty),1)]),e("td",se,[e("div",null,"NT $"+_(t.total),1)])]))),128)),e("tr",null,[e("div",te,[oe,e("div",ae,"NT $"+_(a.final_total),1)])])])])]),l(V,{active:o.isLoading,"onUpdate:active":s[0]||(s[0]=t=>o.isLoading=t),"is-full-page":o.fullPage,opacity:1},{default:h(()=>[le]),_:1},8,["active","is-full-page"]),e("div",re,[de,l(y,{class:"cart_form"},{default:h(({errors:t})=>[e("div",ie,[ce,l(i,{id:"name",name:"姓名",type:"text",class:m(["form-control",{"is-invalid":t.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.order.user.name,"onUpdate:modelValue":s[1]||(s[1]=d=>o.order.user.name=d)},null,8,["class","modelValue"]),l(c,{name:"姓名",class:"invalid_feedback"})]),e("div",ne,[_e,l(i,{id:"tel",name:"電話",type:"text",class:m(["form-control",{"is-invalid":t.電話}]),placeholder:"請輸入手機號碼",modelValue:o.order.user.tel,"onUpdate:modelValue":s[2]||(s[2]=d=>o.order.user.tel=d),rules:p.isPhone},null,8,["class","modelValue","rules"]),l(c,{name:"電話",class:"invalid_feedback"})]),e("div",me,[ue,l(i,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":t.email}]),placeholder:"請輸入信箱",rules:"email|required",modelValue:o.order.user.email,"onUpdate:modelValue":s[3]||(s[3]=d=>o.order.user.email=d)},null,8,["class","modelValue"]),l(c,{name:"email",class:"invalid_feedback"})]),e("div",pe,[ve,l(i,{id:"address",name:"地址",type:"text",class:m(["form-control",{"is-invalid":t.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:o.order.user.address,"onUpdate:modelValue":s[4]||(s[4]=d=>o.order.user.address=d)},null,8,["class","modelValue"]),l(c,{name:"地址",class:"invalid_feedback"})]),e("div",fe,[he,U(e("textarea",{name:"備註",id:"message",class:"w-100 form-control",cols:"10",rows:"10","onUpdate:modelValue":s[5]||(s[5]=d=>o.order.message=d)},null,512),[[L,o.order.message]])])]),_:1})]),e("div",be,[e("button",{type:"button",class:"btn btn-outline-neutral cart_btn",onClick:s[6]||(s[6]=(...t)=>p.onSubmit&&p.onSubmit(...t))}," 送出訂單 ")])])])])}const Se=w(R,[["render",ge],["__scopeId","data-v-b7079c1a"]]);export{Se as default};
